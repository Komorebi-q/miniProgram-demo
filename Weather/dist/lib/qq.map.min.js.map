{"version":3,"sources":["lib/qq.map.min.js"],"names":["_createClass","a","e","c","b","length","d","enumerable","configurable","writable","defineProperty","key","prototype","_classCallCheck","TypeError","ERROR_CONF","KEY_ERR","KEY_ERR_MSG","PARAM_ERR","PARAM_ERR_MSG","SYSTEM_ERR","SYSTEM_ERR_MSG","WX_ERR_CODE","WX_OK_CODE","BASE_URL","URL_SEARCH","URL_SUGGESTION","URL_GET_GEOCODER","URL_CITY_LIST","URL_AREA_LIST","URL_DISTANCE","Utils","location2query","location","lat","lng","latitude","longitude","getWXLocation","wx","getLocation","type","success","fail","complete","getLocationParam","split","polyfillParam","checkParamKeyEmpty","buildErrorConfig","checkKeyword","checkLocation","status","message","buildWxRequestConfig","header","method","data","statusCode","result","errMsg","f","locationProcess","g","QQMapWX","i","Error","value","l","k","keyword","orderby","page_size","page_index","output","address_format","filter","n","distance","j","auto_extend","m","o","boundary","request","url","h","region","region_fix","policy","coord_type","get_poi","poi_options","address","id","mode","to","from","module","exports"],"mappings":"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","file":"qq.map.min.js","sourcesContent":["var _createClass=function(){function a(e,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||false;d.configurable=true;if(\"value\" in d){d.writable=true}Object.defineProperty(e,d.key,d)}}return function(d,b,c){if(b){a(d.prototype,b)}if(c){a(d,c)}return d}}();function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError(\"Cannot call a class as a function\")}}var ERROR_CONF={KEY_ERR:311,KEY_ERR_MSG:\"key格式错误\",PARAM_ERR:310,PARAM_ERR_MSG:\"请求参数信息有误\",SYSTEM_ERR:600,SYSTEM_ERR_MSG:\"系统错误\",WX_ERR_CODE:1000,WX_OK_CODE:200};var BASE_URL=\"https://apis.map.qq.com/ws/\";var URL_SEARCH=BASE_URL+\"place/v1/search\";var URL_SUGGESTION=BASE_URL+\"place/v1/suggestion\";var URL_GET_GEOCODER=BASE_URL+\"geocoder/v1/\";var URL_CITY_LIST=BASE_URL+\"district/v1/list\";var URL_AREA_LIST=BASE_URL+\"district/v1/getchildren\";var URL_DISTANCE=BASE_URL+\"distance/v1/\";var Utils={location2query:function location2query(c){if(typeof c==\"string\"){return c}var b=\"\";for(var a=0;a<c.length;a++){var e=c[a];if(!!b){b+=\";\"}if(e.location){b=b+e.location.lat+\",\"+e.location.lng}if(e.latitude&&e.longitude){b=b+e.latitude+\",\"+e.longitude}}return b},getWXLocation:function getWXLocation(c,b,a){wx.getLocation({type:\"gcj02\",success:c,fail:b,complete:a})},getLocationParam:function getLocationParam(b){if(typeof b==\"string\"){var a=b.split(\",\");if(a.length===2){b={latitude:b.split(\",\")[0],longitude:b.split(\",\")[1]}}else{b={}}}return b},polyfillParam:function polyfillParam(a){a.success=a.success||function(){};a.fail=a.fail||function(){};a.complete=a.complete||function(){}},checkParamKeyEmpty:function checkParamKeyEmpty(c,b){if(!c[b]){var a=this.buildErrorConfig(ERROR_CONF.PARAM_ERR,ERROR_CONF.PARAM_ERR_MSG+b+\"参数格式有误\");c.fail(a);c.complete(a);return true}return false},checkKeyword:function checkKeyword(a){return !this.checkParamKeyEmpty(a,\"keyword\")},checkLocation:function checkLocation(c){var a=this.getLocationParam(c.location);if(!a||!a.latitude||!a.longitude){var b=this.buildErrorConfig(ERROR_CONF.PARAM_ERR,ERROR_CONF.PARAM_ERR_MSG+\" location参数格式有误\");c.fail(b);c.complete(b);return false}return true},buildErrorConfig:function buildErrorConfig(a,b){return{status:a,message:b}},buildWxRequestConfig:function buildWxRequestConfig(c,a){var b=this;a.header={\"content-type\":\"application/json\"};a.method=\"GET\";a.success=function(d){var e=d.data;if(e.status===0){c.success(e)}else{c.fail(e)}};a.fail=function(d){d.statusCode=ERROR_CONF.WX_ERR_CODE;c.fail(b.buildErrorConfig(ERROR_CONF.WX_ERR_CODE,result.errMsg))};a.complete=function(d){var e=+d.statusCode;switch(e){case ERROR_CONF.WX_ERR_CODE:c.complete(b.buildErrorConfig(ERROR_CONF.WX_ERR_CODE,d.errMsg));break;case ERROR_CONF.WX_OK_CODE:var f=d.data;if(f.status===0){c.complete(f)}else{c.complete(b.buildErrorConfig(f.status,f.message))}break;default:c.complete(b.buildErrorConfig(ERROR_CONF.SYSTEM_ERR,ERROR_CONF.SYSTEM_ERR_MSG))}};return a},locationProcess:function locationProcess(f,e,c,a){var d=this;c=c||function(g){g.statusCode=ERROR_CONF.WX_ERR_CODE;f.fail(d.buildErrorConfig(ERROR_CONF.WX_ERR_CODE,g.errMsg))};a=a||function(g){if(g.statusCode==ERROR_CONF.WX_ERR_CODE){f.complete(d.buildErrorConfig(ERROR_CONF.WX_ERR_CODE,g.errMsg))}};if(!f.location){d.getWXLocation(e,c,a)}else{if(d.checkLocation(f)){var b=Utils.getLocationParam(f.location);e(b)}}}};var QQMapWX=function(){function b(i){_classCallCheck(this,b);if(!i.key){throw Error(\"key值不能为空\")}this.key=i.key}_createClass(b,[{key:\"search\",value:function f(i){var l=this;i=i||{};Utils.polyfillParam(i);if(!Utils.checkKeyword(i)){return}var k={keyword:i.keyword,orderby:i.orderby||\"_distance\",page_size:i.page_size||10,page_index:i.page_index||1,output:\"json\",key:l.key};if(i.address_format){k.address_format=i.address_format}if(i.filter){k.filter=i.filter}var n=i.distance||\"1000\";var j=i.auto_extend||1;var m=function m(o){k.boundary=\"nearby(\"+o.latitude+\",\"+o.longitude+\",\"+n+\",\"+j+\")\";wx.request(Utils.buildWxRequestConfig(i,{url:URL_SEARCH,data:k}))};Utils.locationProcess(i,m)}},{key:\"getSuggestion\",value:function h(i){var k=this;i=i||{};Utils.polyfillParam(i);if(!Utils.checkKeyword(i)){return}var j={keyword:i.keyword,region:i.region||\"全国\",region_fix:i.region_fix||0,policy:i.policy||0,output:\"json\",key:k.key};wx.request(Utils.buildWxRequestConfig(i,{url:URL_SUGGESTION,data:j}))}},{key:\"reverseGeocoder\",value:function a(i){var k=this;i=i||{};Utils.polyfillParam(i);var j={coord_type:i.coord_type||5,get_poi:i.get_poi||0,output:\"json\",key:k.key};if(i.poi_options){j.poi_options=i.poi_options}var l=function l(m){j.location=m.latitude+\",\"+m.longitude;wx.request(Utils.buildWxRequestConfig(i,{url:URL_GET_GEOCODER,data:j}))};Utils.locationProcess(i,l)}},{key:\"geocoder\",value:function g(i){var k=this;i=i||{};Utils.polyfillParam(i);if(Utils.checkParamKeyEmpty(i,\"address\")){return}var j={address:i.address,output:\"json\",key:k.key};wx.request(Utils.buildWxRequestConfig(i,{url:URL_GET_GEOCODER,data:j}))}},{key:\"getCityList\",value:function c(i){var k=this;i=i||{};Utils.polyfillParam(i);var j={output:\"json\",key:k.key};\nwx.request(Utils.buildWxRequestConfig(i,{url:URL_CITY_LIST,data:j}))}},{key:\"getDistrictByCityId\",value:function d(i){var k=this;i=i||{};Utils.polyfillParam(i);if(Utils.checkParamKeyEmpty(i,\"id\")){return}var j={id:i.id||\"\",output:\"json\",key:k.key};wx.request(Utils.buildWxRequestConfig(i,{url:URL_AREA_LIST,data:j}))}},{key:\"calculateDistance\",value:function e(i){var k=this;i=i||{};Utils.polyfillParam(i);if(Utils.checkParamKeyEmpty(i,\"to\")){return}var j={mode:i.mode||\"walking\",to:Utils.location2query(i.to),output:\"json\",key:k.key};var l=function l(m){j.from=m.latitude+\",\"+m.longitude;wx.request(Utils.buildWxRequestConfig(i,{url:URL_DISTANCE,data:j}))};if(i.from){i.location=i.from}Utils.locationProcess(i,l)}}]);return b}();module.exports=QQMapWX;"]}