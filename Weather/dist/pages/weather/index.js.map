{"version":3,"sources":["pages/weather/index.js"],"names":["qqMapSdk","Page","data","backgroundImage","backgroundColor","address","tips","air","current","today","tomorrow","hourlyData","weeklyData","lifeStyle","onLoad","query","wx","getSystemInfo","success","res","console","log","statusBarHeight","windowWidth","setData","paddingTop","scale","width","QQMapWX","key","onReady","canvasId","ctx","createCanvasContext","h","rain","Snow","amount","speedFactor","run","onShow","getLocation","type","reverseGeocoder","location","latitude","longitude","addressRes","result","formatted_addresses","recommend"],"mappings":"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","file":"index.js","sourcesContent":["import QQMapWX from './../../lib/qq.map.min';\nimport {\n  Rain,\n  Snow\n} from './../../lib/effect';\nlet qqMapSdk;\nPage({\n  data: {\n    backgroundImage: '../../images/cloud.jpg',\n    backgroundColor: '#62aadc',\n    address: '北京海淀区',\n    tips: '天气还不错~',\n    air: {\n      \"status\": 0,\n      \"aqi\": \"77\",\n      \"color\": \"#00cf9a\",\n      \"name\": \"良\"\n    },\n    current: {\n      \"backgroundImage\": \"https://tianqi-1d3bf9.tcb.qcloud.la/bg/day/overcast.jpg\",\n      \"backgroundColor\": \"#5c7a93\",\n      \"temp\": \"35\",\n      \"wind\": \"南风\",\n      \"windLevel\": \"1\",\n      \"weather\": \"阴\",\n      \"humidity\": \"73\",\n      \"icon\": \"yin\",\n      \"ts\": \"2018-08-12 14:54\"\n    },\n    today: {\n      \"temp\": \"24/30°\",\n      \"icon\": \"leizhenyu\",\n      \"weather\": \"雷阵雨\"\n    },\n    tomorrow: {\n      \"temp\": \"24/30°\",\n      \"icon\": \"leizhenyu\",\n      \"weather\": \"雷阵雨\"\n    },\n    // 24小时天气数据\n    hourlyData: [\n      {\n        \"temp\": \"29\",\n        \"time\": \"16:00\",\n        \"weather\": \"雷阵雨\",\n        \"icon\": \"leizhenyu\"\n      }\n    ],\n    // 一周天气数据\n    weeklyData: [\n      {\n        \"day\": \"雷阵雨\",\n        \"dayIcon\": \"leizhenyu\",\n        \"dayWind\": \"南风\",\n        \"dayWindLevel\": \"1-2\",\n        \"maxTemp\": \"30\",\n        \"minTemp\": \"24\",\n        \"night\": \"中雨\",\n        \"nightIcon\": \"zhenyuye\",\n        \"nightWind\": \"南风\",\n        \"nightWindLevel\": \"1-2\",\n        \"time\": 1534032000000\n      }\n      // ...\n    ],\n    // 生活指数\n    lifeStyle: [\n      {\n        \"name\": \"舒适度\", // 指数名称\n        \"icon\": \"guominzhishu\", // 指数对应的icon图标type\n        \"info\": \"较不舒适\", // 指数数值\n        // 指数的详情\n        \"detail\": \"白天虽然有雨，但仍无法削弱较高气温带来的暑意，同时降雨造成湿度加大会您感到有些闷热，不很舒适。\"\n      }\n      // ...\n    ]\n  },\n  onLoad(query) {\n    wx.getSystemInfo({\n      success: (res) => {\n        console.log(res.statusBarHeight, res.windowWidth);\n        this.setData({\n          paddingTop: res.statusBarHeight + 12,\n          scale: res.windowWidth / 375,\n          width: res.windowWidth\n        });\n      }\n    });\n    qqMapSdk = new QQMapWX({\n      key: '6LLBZ-CE5EW-4RVR6-O6B2Q-BDRZT-NUFAC'\n    });\n  },\n  onReady() {\n    const canvasId = 'effect';\n    const ctx = wx.createCanvasContext(canvasId);\n    let {width, scale} = this.data;\n    let h = 768 / 2 * scale;\n    const rain = new Snow(ctx, width, h, {\n      amount: 100,\n      speedFactor: 0.03\n    });\n    rain.run();\n  },\n  onShow() {\n    wx.getLocation({\n      type: 'wgs84',\n      success: (res) => {\n        qqMapSdk.reverseGeocoder({\n          location: {\n            latitude: res.latitude,\n            longitude: res.longitude\n          },\n          success: (addressRes) => {\n            var address = addressRes.result.formatted_addresses.recommend;\n            this.setData({\n              address\n            })\n          }\n        });\n      }\n    });\n  }\n});"]}